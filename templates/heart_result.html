<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MediScan AI – Heart Disease Result</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg: linear-gradient(135deg,#0a0e1a,#02040a,#000);
  --card: linear-gradient(145deg,rgba(2,8,18,.92),rgba(2,6,15,.92));
  --border: rgba(148,163,184,.2);
  --green:#22c55e;
  --blue:#38bdf8;
  --yellow:#facc15;
  --red:#ef4444;
  --muted:#9ca3af;
  --text:#f5f5f5;
  --shadow:0 20px 40px rgba(0,0,0,.6);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
  background:var(--bg);
  color:var(--text);
}

header{
  padding:1.4rem 2rem;
  border-bottom:1px solid var(--border);
  background:rgba(2,4,10,.9);
  backdrop-filter:blur(12px);
}

header h2{margin:0;font-size:1.6rem;font-weight:700}

main{
  max-width:1600px;
  margin:auto;
  padding:2rem;
  display:flex;
  flex-direction:column;
  gap:2rem;
}

.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:20px;
  padding:1.8rem;
  box-shadow:var(--shadow);
}

.card::before{
  content:'';
  display:block;
  height:4px;
  background:linear-gradient(90deg,var(--green),var(--blue));
  margin:-1.8rem -1.8rem 1.3rem;
}

.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:1.6rem}
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:1.6rem}
.grid-1{display:grid;grid-template-columns:1fr}
.grid-auto{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1.6rem}

small{color:var(--muted)}
canvas{height:260px!important}
button{
  background:linear-gradient(135deg,var(--green),#16a34a);
  color:#02040a;
  border:none;
  padding:.8rem 1.5rem;
  border-radius:999px;
  font-weight:700;
  cursor:pointer;
}

.progress{
  height:8px;
  background:#1f2933;
  border-radius:8px;
  overflow:hidden;
  margin-bottom:.6rem;
}
.progress > div{height:100%}

textarea{
  width:100%;
  background:linear-gradient(145deg,#020812,#02040a);
  border:1px solid var(--border);
  border-radius:14px;
  color:var(--text);
  padding:1rem;
  resize:none;
}

footer{
  text-align:center;
  padding:1.5rem;
  font-size:.8rem;
  color:var(--muted);
  background:rgba(2,4,10,.85);
}

@media(max-width:1000px){
  .grid-3,.grid-2{grid-template-columns:1fr}
}
</style>
</head>

<body>

<header>
<h2><i class="fas fa-heartbeat"></i> MediScan<span style="color:var(--green)">AI</span> – Heart Disease Diagnostic Report</h2>
</header>

<main>

<!-- ================= PATIENT INFO ================= -->
<div class="card">
<h3><i class="fas fa-user"></i> Patient Information</h3>
<div class="grid-auto">
  <div><small>Name</small><br><b>{{ patient_name }}</b></div>
  <div><small>Age</small><br><b>{{ age }}</b></div>
  <div><small>Gender</small><br><b>{{ gender }}</b></div>
  <div><small>Diagnosis</small><br><b>{{ predicted_label }}</b></div>
</div>
</div>

<!-- ================= CONFIDENCE & SEVERITY ================= -->
<div class="grid-2">
<div class="card">
<h3>Risk Confidence</h3>
<p style="font-size:3.2rem;font-weight:800;
color:{% if confidence >= 70 %}var(--red)
{% elif confidence >= 40 %}var(--yellow)
{% else %}var(--green){% endif %}">
{{ confidence }}%
</p>
<small>AI-estimated cardiovascular risk probability</small>
</div>

<div class="card">
<h3>Risk Severity</h3>
<p style="font-size:2.8rem;font-weight:800">{{ risk_level }}</p>
<small>
{% if risk_level == "High Risk" %}
Immediate cardiology consultation recommended
{% elif risk_level == "Moderate Risk" %}
Lifestyle modification & monitoring advised
{% else %}
Healthy cardiac profile detected
{% endif %}
</small>
</div>
</div>

<!-- ================= ANALYTICS ================= -->
<div class="grid-3">
<div class="card"><h4>Risk Gauge</h4><canvas id="gauge"></canvas></div>
<div class="card"><h4>Risk Distribution</h4><canvas id="donut"></canvas></div>
<div class="card"><h4>Threshold Comparison</h4><canvas id="threshold"></canvas></div>
</div>

<div class="grid-1">
<div class="card"><h4>Risk Stability Trend</h4><canvas id="stability"></canvas></div>
</div>

<!-- ================= CLINICAL PARAMETERS ================= -->
<div class="card">
<h4>Clinical Parameter Summary</h4>

<small>Blood Pressure</small>
<div class="progress"><div style="width:{{ bp/2 }}%;background:#ef4444"></div></div>

<small>Cholesterol</small>
<div class="progress"><div style="width:{{ cholesterol/3 }}%;background:#facc15"></div></div>

<small>Blood Sugar</small>
<div class="progress"><div style="width:{{ blood_sugar }}%;background:#38bdf8"></div></div>

<small>Heart Rate</small>
<div class="progress"><div style="width:{{ heart_rate/2 }}%;background:#22c55e"></div></div>
</div>

<!-- ================= XAI SUMMARY ================= -->
<div class="card">
<h4>Explainable AI Summary</h4>
<p>
The model evaluated blood pressure, cholesterol, glucose level, heart rate,
and chest pain type to estimate cardiovascular risk.
Higher weight was given to abnormal blood pressure and cholesterol levels.
</p>
</div>

<!-- ================= DOCTOR REVIEW ================= -->
<div class="grid-2">

<div class="card">
<h4><i class="fas fa-user-md"></i> Doctor Review Status</h4>
<span style="background:var(--yellow);padding:.4rem .8rem;border-radius:999px;color:#02040a;font-weight:700">
Pending Review
</span>
</div>

<div class="card">
<h4><i class="fas fa-notes-medical"></i> Doctor Remarks</h4>
<textarea rows="5" placeholder="Enter cardiologist remarks or follow-up notes..."></textarea>
</div>

</div>

<!-- ================= ACTIONS ================= -->
<div class="card" style="display:flex;justify-content:space-between;flex-wrap:wrap">
<p style="font-size:.85rem;color:var(--muted)">
<i class="fas fa-robot"></i> AI-assisted output. Not a final medical diagnosis.
</p>
<div>
<button onclick="location.href='/download_pdf'">Download PDF</button>
</div>
</div>

</main>

<footer>
MediScan AI © 2025 • MCA Final Year Project
</footer>

<script>
const confidence = {{ confidence }};

new Chart(gauge,{
type:'doughnut',
data:{datasets:[{data:[confidence,100-confidence],backgroundColor:['#22c55e','#1f2933']}]},
options:{cutout:'80%',plugins:{legend:{display:false}}}
});

new Chart(donut,{
type:'doughnut',
data:{
labels:['Risk','Safe'],
datasets:[{data:[confidence,100-confidence],backgroundColor:['#ef4444','#22c55e']}]
}
});

new Chart(threshold,{
type:'bar',
data:{
labels:['Threshold','Prediction'],
datasets:[{data:[50,confidence],backgroundColor:['#facc15','#38bdf8']}]
},
options:{scales:{y:{beginAtZero:true,max:100}},plugins:{legend:{display:false}}}
});

new Chart(stability,{
type:'line',
data:{
labels:['T1','T2','T3','T4'],
datasets:[{
data:[confidence-8,confidence-4,confidence,confidence+3],
borderColor:'#38bdf8',
fill:true,
backgroundColor:'rgba(56,189,248,.2)',
tension:.4
}]
},
options:{scales:{y:{beginAtZero:true,max:100}}}
});
</script>

</body>
</html>
